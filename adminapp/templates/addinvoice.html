{% extends 'master.html' %}
{% block content %}
{% load static %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>



<div class="page-wrapper">
    <div class="content container-fluid">

        <div class="page-header invoices-page-header">
            <div class="row align-items-center">
                <div class="col">
                    <ul class="breadcrumb invoices-breadcrumb">
                        <li class="breadcrumb-item invoices-breadcrumb-item">
                            <a href="/user/invoiceList">
                                <i class="fa fa-arrow-left"></i> Back to Invoice List
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- <div class="col-auto">
                    <div class="invoices-create-btn">
                        <a class="invoices-preview-link" href="/user/invoicedetails"
                            data-bs-target="#invoices_preview"><i class="fe fe-eye"></i> Preview</a>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#delete_invoices_details"
                            class="btn delete-invoice-btn">
                            Delete Invoice
                        </a>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#save_invocies_details"
                            class="btn save-invoice-btn">
                            Save Draft
                        </a>
                    </div>
                </div> -->
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="card invoices-add-card">
                    <div class="card-body">
                        <!-- <form action="#" class="invoices-form"> -->
                            <div class="invoices-main-form">
                                <div class="row">
                                    <div class="col-xl-4 col-md-6 col-sm-12 col-12">
                                        <!-- <div class="form-group">
                                           
                                            <div class="form-group">
                                                <label>Client Name</label>
                                                <input class="form-control" type="text"
                                                    placeholder="Enter Name">
                                            </div>
                                        </div> -->
                                        <div class="form-group">
                                            <label>Phone Number</label>
                                            <input class="form-control" id="phone" type="text"
                                                placeholder="Enter Phone Number">
                                        </div>
                                    </div>
                                    <!-- <div class="col-xl-5 col-md-6 col-sm-12 col-12">
                                        <h4 class="invoice-details-title">Invoice details</h4>
                                        <div class="invoice-details-box">
                                            <div class="invoice-inner-head">
                                                <span>Invoice No. <span class="text-primary">IN093439#@09</span></span>
                                            </div>
                                            <div class="invoice-inner-footer">
                                                <div class="row align-items-center">
                                                    <div class="col-lg-6 col-md-6">
                                                        <div class="invoice-inner-date">
                                                            <span>
                                                                Date <input class="form-control datetimepicker"
                                                                    type="text" placeholder="15/02/2022">
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6">
                                                        <div class="invoice-inner-date invoice-inner-datepic">
                                                            <span>
                                                                Due Date <input class="form-control datetimepicker"
                                                                    type="text" placeholder="Select">
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div> -->
                                    <div class="col-xl-3 col-md-12 col-sm-12 col-12">
                                        <div class="inovices-month-info">
                                            <!-- <div class="form-group mb-0">
                                                <label class="custom_check w-100">
                                                    <input type="checkbox" id="gst" name="invoice">
                                                    <span class="checkmark"></span> Enable Gst
                                                </label>
                                                <div class="form-group" style="display: none;" id="showgst">
                                                    <label>Gst Number</label>
                                                    <input class="form-control" type="text"
                                                        placeholder="Enter Gst Number">
                                                </div>
                                             
                                            </div> -->
                                            <div id="show-invoices">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <select class="select">
                                                                <option>By month</option>
                                                                <option>March</option>
                                                                <option>April</option>
                                                                <option>May</option>
                                                                <option>June</option>
                                                                <option>July</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <input class="form-control" type="text"
                                                                placeholder="Enter Months">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="invoice-item">
                                <div class="row">
                                    <div class="col-xl-4 col-lg-6 col-md-6">
                                        <div class="invoice-info">
                                            <strong class="customer-text">Invoice From </strong>
                                            <p class="invoice-details invoice-details-two">
                                                GSTIN : 46AAGCE76FS6A1ZA2 <br>
                                                abs house <br>
                                                Morayur <br>
                                                673409 <br>
                                                
                                                Zip code ,City - Country <br>
                                                9087484288 <br>
                                                Email <br>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="col-xl-4 col-lg-6 col-md-6">
                                        <div class="invoice-info">
                                            <strong class="customer-text">Invoice To</strong>
                                            <p class="invoice-details invoice-details-two">
                                                <span id="gst"></span><br>
                                                <span id="address"></span><br>
                                                <span id="district"></span><br>
                                                <span id="state"></span><br>
                                                <span id="pincode"></span><br>
                                                <span id="mail"></p>
                                               
                                                <!-- kondotty <br>
                                                673435 <br>
                                                GSTIN : 32AAGCE7654A1ZA2 <br>
                                                Zip code ,City - Country <br>
                                                9087484288 <br>
                                                Email <br> -->
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="invoice-add-table">
                                <h4>Product Details</h4>
                                <div class="table-responsive">
                                    <table class="table table-center add-table-items ">
                                        <thead >
                                            <tr>
                                                <th>id</th>
                                                <th>From Date</th>
                                                <th>Due Date</th>
                                                <th>Amount</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbodyofInvoice">
                                            <!-- {% for i in estimatelist %}
                                            <tr>
                                                <td  > <a href="/user/invoicedetails" class="invoice-link">{{ i.id }}</a> </td>
                                                <td>
                                                    <h2 class="table-avatar">
                                                        {{ i.id }}
                                                    </h2>
                                                </td>
                                                <td>{{ i.est_fromdate }}</td>
                                                <td>{{ i.est_todate }}</td>
                                                <td class="text-primary">${{ i.est_balance }}</td>
                                                <td>{% if i.est_status == 'Billed'  %} <span class="badge badge-pill bg-success-light">{{ i.est_status }}</span> {% elif i.est_status == 'Partialy Paid' %} <span class="badge bg-danger-light">{{ i.est_status }}</span> {% elif i.est_status == 'Advanced' %} <span class="badge bg-warning-light">{{ i.est_status }}</span> {% elif i.est_status == 'Closed' %} <span class="badge bg-primary-light">{{ i.est_status }}</span>  {% elif i.est_status == 'Pending' %} <span class="badge bg-info-light">{{ i.est_status }}</span>  {% endif %}  </td>
                                                <td class="text-end">
                                                    <div class="dropdown dropdown-action">
                                                        <a href="#" class="action-icon dropdown-toggle"
                                                            data-bs-toggle="dropdown" aria-expanded="false"><i
                                                                class="fas fa-ellipsis-v"></i></a>
                                                        <div class="dropdown-menu dropdown-menu-end">
                                                            <a class="dropdown-item" href="/user/editinvoice"><i
                                                                    class="far fa-edit me-2"></i>Edit</a>
                                                            <a class="dropdown-item" href="/user/invoicedetails"><i
                                                                    class="far fa-eye me-2"></i>View</a>
                                                            <a class="dropdown-item" href="javascript:void(0);"><i
                                                                    class="far fa-trash-alt me-2"></i>Delete</a>
    
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            {% endfor %} -->
                                            <!-- <tr class="add-row">
                                                <td>
                                                    <input type="text" class="form-control">
                                                </td>
                                                <td>
                                                    <input type="text" class="form-control">
                                                </td>
                                                <td>
                                                    <input type="text" class="form-control">
                                                </td>
                                                <td>
                                                    <input type="text" class="form-control">
                                                </td>
                                                <td>
                                                    <input type="text" class="form-control">
                                                </td>
                                                <td>
                                                    <input type="text" class="form-control">
                                                </td>
                                                <td class="add-remove text-end">
                                                    <a href="javascript:void(0);" class="add-btn me-2"><i
                                                            class="fas fa-plus-circle"></i></a>
                                                    <a href="#" class="copy-btn me-2"><i class="fa fa-copy"></i></a><a
                                                        href="javascript:void(0);" class="remove-btn"><i
                                                            class="fa fa-trash"></i></a>
                                                </td>
                                            </tr> -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- <div class="row">
                                <div class="col-lg-7 col-md-6">
                                    
                                   
                                </div>
                                <div class="col-lg-5 col-md-6">
                                    <div class="invoice-total-card">
                                        <h4 class="invoice-total-title">Summary</h4>
                                        <div class="invoice-total-box">
                                            <div class="invoice-total-inner">
                                                <p>Gst <span>5%</span></p>
                                               
                                                <div class="links-info-one">
                                                    <div class="links-info">
                                                        <div class="links-cont">
                                                            <a href="#" class="service-trash">
                                                                <i class="feather-trash-2"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                               
                                                <div class="links-info-discount">
                                                    <div class="links-cont-discount">
                                                      
                                                        <a href="#" class="service-trash-one">
                                                            <i class="feather-trash-2"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="invoice-total-footer">
                                                <h4>Total Amount <span>$ 894.00</span></h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="upload-sign">
                                      
                                        <div class="form-group float-end mb-0">
                                            <button class="btn btn-primary" type="submit">Save Invoice</button>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        <!-- </form> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>







<div class="modal custom-modal fade bank-details" id="bank_details" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div class="form-header text-start mb-0">
                    <h4 class="mb-0">Add Bank Details</h4>
                </div>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="bank-inner-details">
                    <div class="row">
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <label>Account Holder Name</label>
                                <input type="text" class="form-control" placeholder="Add Name">
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <label>Bank name</label>
                                <input type="text" class="form-control" placeholder="Add Bank name">
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <label>IFSC Code</label>
                                <input type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <div class="form-group">
                                <label>Account Number</label>
                                <input type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="bank-details-btn">
                    <a href="javascript:void(0);" data-bs-dismiss="modal" class="btn bank-cancel-btn me-2">Cancel</a>
                    <a href="javascript:void(0);" class="btn bank-save-btn">Save Item</a>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal custom-modal fade" id="delete_invoices_details" role="dialog">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <div class="form-header">
                    <h3>Delete Invoice Details</h3>
                    <p>Are you sure want to delete?</p>
                </div>
                <div class="modal-btn delete-action">
                    <div class="row">
                        <div class="col-6">
                            <a href="javascript:void(0);" data-bs-dismiss="modal"
                                class="btn btn-primary paid-continue-btn">Delete</a>
                        </div>
                        <div class="col-6">
                            <a href="javascript:void(0);" data-bs-dismiss="modal"
                                class="btn btn-primary paid-cancel-btn">Cancel</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal custom-modal fade" id="save_invocies_details" role="dialog">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <div class="form-header">
                    <h3>Save Invoice Details</h3>
                    <p>Are you sure want to save?</p>
                </div>
                <div class="modal-btn delete-action">
                    <div class="row">
                        <div class="col-6">
                            <a href="javascript:void(0);" data-bs-dismiss="modal"
                                class="btn btn-primary paid-continue-btn">Save</a>
                        </div>
                        <div class="col-6">
                            <a href="javascript:void(0);" data-bs-dismiss="modal"
                                class="btn btn-primary paid-cancel-btn">Cancel</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>

$('#phone').change(function(){
    $.ajax({
        url: "invoicegetdata",
        type: 'POST',
        data: {
            'clientphone': $('#phone').val(),

        },
        success: function (responce) {
            $('#gst' ).html(responce.details.gst)
            $('#address' ).html(responce.details.address)
            $('#district' ).html(responce.details.district)
            $('#state' ).html(responce.details.state)
            $('#pincode' ).html(responce.details.zipcode)
            $('#mail' ).html(responce.details.email)
            for(var i=0;i<responce.details.estimatelist.length;i++){
               var html=''
               html+='<tr onclick=gotoEstimate('+responce.details.estimatelist[i].id+')>'
               html+='<td>'+responce.details.estimatelist[i].id +'</td>'
               html+='<td>'+responce.details.estimatelist[i].est_fromdate +'</td>'
               html+='<td>'+responce.details.estimatelist[i].est_todate +'</td>'
               html+='<td>'+responce.details.estimatelist[i].est_balance +'</td>'
               html+='<td>'+responce.details.estimatelist[i].est_status +'</td>'
            //    html+='<td>'+responce.details.estimatelist[i].clientd.client_name +'</td>'
            //    html+='<td>'+responce.details.estimatelist[i].clientd.client_name +'</td>'
               html+='</tr>'
               $('#tbodyofInvoice').append(html)
            }
         
         
         
         
         





        }

    })
   
})

function gotoEstimate(id){
    window.location.href="/user/invoicebill/"+id
}


    // $('#gst').click(function () {
    //     console.log('hi')
    //     $('#showgst').toggle()

    // })
</script>
<!-- end modal -->
{% endblock %}